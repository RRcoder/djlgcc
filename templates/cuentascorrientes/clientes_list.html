{% extends "base.html" %}
{% block content %}
<div class="container-fluid">
    <h2>Clientes</h2>

    <div class="row mb-1">
        <div class="col-10"></div>
        <div class="col-2 text-end">
            <a href="{% url 'cuentascorrientes:clientes_add' %}" class="btn btn-primary btn-sm">Cargar nuevo</a>
        </div>
    </div>
    
    <table class="table table-bordered table-striped table-sm">
        <thead class="table-dark">
            <tr>
                <th>Nombre</th>
                <th>Tipo</th>
                <th>Domicilio</th>
                <th>Documento</th>
                <th>Telefono m√≥vil</th>
                <th>CtaCte</th>
                <th>Credito</th>
                <th></th>
                <th>Acciones</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            {% for item in items %}
                <tr>
                    <td>{{ item.nombre }}</td>
                    <td>{{ item.tipo }}</td>
                    <td>{{ item.get_domicilio }}</td>
                    <td>{{ item.get_documento }}</td>
                    <td>{{ item.telefono_celular|default_if_none:"" }}</td>
                    <td>{{ item.estadoctacte.descripcion }}</td>
                    <td>{{ item.credito|default_if_none:"" }}</td>
                    <td>{{ item.updated|date:"d/m/Y H:i" }}</td>
                    <td>
                        <div class="btn-group">
                            <button type="button" class="btn btn-sm btn-primary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                Acciones
                            </button>
							<ul class="dropdown-menu">
								<li>
                        			<a class="dropdown-item" href="{% url 'cuentascorrientes:clientes_edit' item.pk %}" class="btn btn-sm btn-primary">Editar</a>
								</li>
                                <li><a class="dropdown-item" href="{% url 'cuentascorrientes:ctacte' item.pk %}">Activar Cuenta corriente</a></li>
                                <li><a class="dropdown-item" href="{% url 'cuentascorrientes:ctacte_bloquear' item.pk %}">Bloquear Cuenta corriente</a></li>
                                <li><a class="dropdown-item" href="{% url 'cuentascorrientes:entrega_mercaderia' item.pk %}">Crear Pedido</a></li>
                                <li><a class="dropdown-item" href="{% url 'cuentascorrientes:listado_pedidos_pendientes_clie' %}?cliente_id={{ item.pk }}">Ver pedidos pend.</a></li>

                            </ul>
                        </div>
                    </td>
                    <td>
                    <a href="{% url 'cuentascorrientes:ingresar_pagos_form' cliente_id=item.pk %}" target="blank" class="btn btn-sm btn-primary">Agregar Pago</a>
                    </td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="5">No hay registros cargados.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}

